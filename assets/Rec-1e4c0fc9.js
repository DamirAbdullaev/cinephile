import{f as T,g as M,h as L,y as j,l as F,k as K,o as d,m as p,e,_ as Q,n as u,z as X,u as O,A as H,B as q,j as v,c as n,r as $,a as W,d as k,t as i,x as g,w as b,s as J,N as Z,F as ee,q as te,b as se,S as oe,C as ie}from"./index-e58a277f.js";const ae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACoSURBVHgB7dDdCYNQDIbhnE7gCB2lG5Ru0M2yQjfICF2lG3yNF6KIP+cniQi+EBC8eD4O0dWRAej03noPikzBL8YkbACW8x+A7fwGIC/7AShLzAagLmkegLakegBskuIBsE2yB8An0bsPRlqDyadPSunVf9wott/mX/jE06eOgHkXNIY5GzSCuRhshLkarIS5GSyE7cBM2B7cgf3ACSyh4Ax/6nV0dfb+pXxa1G7j+H8AAAAASUVORK5CYII=",le=T({id:"Rec",state:()=>({url:"https://api.themoviedb.org/3/",recMovies:null,recTvs:null}),actions:{async getRec({type:a,id:s}){try{let l=(await M.get(`${this.url}${a}/${s}/recommendations?api_key=${L}&language=RU`)).data.results;a=="movie"?this.recMovies=l:this.recTvs=l}catch(o){console.error("Произошла ошибка в получениe рекомендованных фильмов или сериалов по его id "+o)}}}}),ne=T({id:"getRecItem",state:()=>({videoId:""}),actions:{async getRecItem(a){try{const s=await M.get("https://www.googleapis.com/youtube/v3/search",{params:{part:"snippet",q:a+" trailer",type:"video",maxResults:1,key:j}});if(s.data.items&&s.data.items.length>0){const o=s.data.items[0];this.videoId=o.id.videoId}else console.error("Видео не найдено")}catch(s){console.error("Произошла ошибка в получении рекомендованных фильмов или сериалов по его id: "+s)}}}}),ce={class:"rec__infoo_block"},re={key:0,class:"rec__infoo_block-video"},_e=["src"],ue={key:1},de={__name:"RecItemBlock",props:["openStatus","movieTitle"],setup(a){const s=a,o=ne(),l=()=>{o.getRecItem(s.movieTitle)};return F(()=>{l()}),K(()=>s.movieTitle,(c,r)=>{c!==r&&l()}),(c,r)=>(d(),p("div",{class:X(["rec__infoo",{active:a.openStatus}])},[e("img",{onClick:r[0]||(r[0]=S=>c.$emit("close")),src:Q,class:"rec__infoo-close",alt:""}),e("div",ce,[u(o).videoId?(d(),p("div",re,[e("iframe",{width:"100%",height:"100%",src:`https://www.youtube.com/embed/${u(o).videoId}`,frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,_e)])):(d(),p("h2",ue,"Трейлер не найден..."))])],2))}},ve={key:0,class:""},pe={class:"rec"},me={class:"rec__info"},he={class:"rec__info_block"},ge={class:"rec__info_block-bg",alt:""},Ae={class:"rec__info_desc"},we=e("img",{src:ae,alt:""},null,-1),fe=e("span",null,"Смотерть трейлер",-1),ye=[we,fe],ke=e("span",{class:"rec__info_block-title"},"В главных ролях",-1),be={class:"rec__info_card"},Se={class:"rec__info_card-bg",alt:""},Ie={class:"rec__info_actors"},Be={class:"rec__status container"},Re={class:"rec__status_window"},Ce=e("h2",null,"Бюджет",-1),$e={class:"rec__status_window"},Te=e("h2",null,"Сборы",-1),Me={class:"rec__status_window"},Ve=e("h2",null,"Статус",-1),Ye={class:"rec__status_window"},Pe=e("h2",null,"Исходное название",-1),xe={class:"rec__list-title container"},Ne={alt:""},Ue={class:"rec__list_item-click"},De={__name:"Rec",props:{type:String},setup(a){const s=a,o=O(),l=H(),c=le(),r=q(),S=v([Z]),I=v(r.params.id);o.getConfiguration(),l.getItemById({type:s.type,id:I.value}),c.getRec({type:s.type,id:I.value});const t=n(()=>s.type=="movie"?l.itemMovies:l.itemTvs),B=n(()=>s.type=="movie"?c.recMovies:c.recTvs),A=n(()=>o.movieUrl),w=n(()=>o.movieSize),V=n(()=>new Date(t.value.release_date).getFullYear()||new Date(t.value.first_air_date).getFullYear()),Y=n(()=>t.value.genres.reduce((m,h)=>m+`, ${h.name}`,"")),P=n(()=>Math.floor(t.value.runtime/60)||Math.floor(t.value.number_of_episodes/60)),x=n(()=>t.value.runtime%60||t.value.number_of_episodes%60),N=()=>{setTimeout(()=>{location.reload()},100)};let U=v({breakpoints:{320:{slidesPerView:1},576:{slidesPerView:2},992:{slidesPerView:2},1200:{slidesPerView:3},1400:{slidesPerView:3}}}),f=v(!1);const R=v(null);let C=0;const z=()=>{C=window.scrollY,f.value=!0;let m=R.value.offsetTop;window.scrollTo({top:m-nav.clientHeight,behavior:"smooth"})},D=()=>{f.value=!1,window.scrollTo({top:C,behavior:"smooth"})};return(m,h)=>{const E=$("RecActors"),G=$("router-link"),y=W("lazy");return t.value?(d(),p("div",ve,[e("div",pe,[e("div",me,[e("div",he,[k(e("img",ge,null,512),[[y,A.value+w.value+t.value.backdrop_path]]),e("h2",null,i(t.value.title||t.value.name),1),e("p",null,i(t.value.overview),1),e("div",Ae,[e("span",null,i(V.value)+i(Y.value),1),e("span",null,i(P.value)+"h "+i(x.value)+"m",1)]),e("button",{class:"btnMoree",onClick:h[0]||(h[0]=_=>z())},ye),ke,e("div",be,[k(e("img",Se,null,512),[[y,A.value+w.value+t.value.backdrop_path]])])])]),e("div",Ie,[g(E,{class:"rec__info_block-actors",type:s.type,id:t.value.id,count:6},null,8,["type","id"])])]),e("div",{class:"",ref_key:"itemBlock",ref:R},[g(de,{movieTitle:t.value.original_title||t.value.original_name,openStatus:u(f),onClose:D},null,8,["movieTitle","openStatus"])],512),e("div",Be,[e("div",Re,[Ce,e("span",null,"$"+i(t.value.budget||" 0"),1)]),e("div",$e,[Te,e("span",null,"$"+i(t.value.revenue||" 0"),1)]),e("div",Me,[Ve,e("span",null,i(t.value.status),1)]),e("div",Ye,[Pe,e("span",null,i(t.value.original_title||t.value.original_name),1)])]),e("h2",xe,i(B.value==""?"Похоже что похожих фильмов или сериалов не найдено":"Рекомендации"),1),g(u(ie),{class:"rec__list container",modules:S.value,"space-between":24,navigation:!0,breakpoints:u(U).breakpoints},{default:b(()=>[(d(!0),p(ee,null,te(B.value,_=>(d(),se(u(oe),{class:"rec__list_item",key:_.id},{default:b(()=>[g(G,{to:`/${a.type}/`+_.id,onClick:N},{default:b(()=>[k(e("img",Ne,null,512),[[y,A.value+w.value+_.backdrop_path]]),e("div",Ue,[e("h2",null,i(_.title||_.name),1)])]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1},8,["modules","breakpoints"])])):J("",!0)}}};export{De as _};
